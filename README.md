# unison-api

Сервис для работы с аккаунтами и опросником

## Сущность аккаунты

Аккаунты - это основные пользователи

### Методы сущности аккаунта

#### getAccounts

Получает аккаунты:

- Принимает параметры
- Валидирует
- Получает аккаунт по `telegramId`
- Возвращает сущность аккаунта

Принимает параметры:

- `limit` - *number* - максимальное количество записей
- `telegramId` - *number* - [опционально] - *string*  - идентификатор аккаунта в telegram

#### createAccount

Создает аккаунт:

- Принимает параметры
- Валидирует
- Получает аккаунт по переданному `telegramId`
    - Если такой аккаунт существует, возвращает его
- Создает и возвращает новый аккаунт

Принимает параметры:

- `telegramId`- *number* - идентификатор аккаунта в telegram
- `name` - *string* - имя пользователя
- `age` - *string* - дата рождения
- `gender` - *string* - пол (`male`, `female`)
- `languageCode` - *string* - [опционально] - язык интерфейса в телеграм (`ru`, `en`, `de` и так далее, по дефолту `en`)

#### modifyAccounts

Создает аккаунт:

- Принимает параметры
- Валидирует
- Изменяет аккаунт
- Возвращает измененный аккаунт

Принимает параметры:

- `telegramId`- *number* - идентификатор аккаунта в telegram
- `name` - *string* - [опционально] - имя пользователя
- `age` - *string* - [опционально] - дата рождения
- `gender` - *string* - [опционально] - пол (`male`, `female`)
- `languageCode` - *string* - [опционально] - язык интерфейса в телеграм (`ru`, `en`, `de` и так далее, по дефолту `en`)

## Сущность опросник

Опросник - это тест, который состоит из категорий, в каждой категории вопроси и по 4 ответа к каждому вопросу

### Методы сущности опросника

Работа с опросником

#### getQuizCategories

Возвращает категории опросника:

- Принимает параметры
- Валидирует
- Получает и возвращает категории опросника

Принимает параметры:

- No

#### getQuizQuestions

Возвращает вопросы по определенной категории:

- Принимает параметры
- Валидирует
- Получает и возвращает категории опросника

Принимает параметры:

- `quizCategoryId`- *number* - идентификатор категории опросника

#### getAccountAnswers

Возвращает ответы определенного гостя:

- Принимает параметры
- Валидирует
- Получает из БД и возвращает данные

Принимает параметры:

- `telegramId`- *number* - идентификатор аккаунта в telegram

#### getAccountAnswersAggregate

Возвращает ответы определенного гостя сгруппированные по категориям:

- Принимает параметры
- Валидирует
- Получает из БД и возвращает данные

Принимает параметры:

- `telegramId`- *number* - идентификатор аккаунта в telegram


#### createAccountAnswer

Создает новый ответ пользователя:

- Принимает параметры
- Валидирует
- Получает из БД и возвращает данные

Принимает параметры:

- `telegramId`- *number* - идентификатор аккаунта в telegram
- `quizCategoryId`- *number* -идентификатор категории опросника
- `questionId`- *number* -идентификатор вопроса
- `answerId`- *number* -идентификатор ответа

